import _extends from"/home/martins/Code/docusaurus-plugin-showcase/node_modules/@babel/runtime/helpers/esm/extends.js";import _objectWithoutPropertiesLoose from"/home/martins/Code/docusaurus-plugin-showcase/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js";var _excluded=["id","icon","label","tag"];/**
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */import React,{useCallback,useState,useEffect}from'react';import{useHistory,useLocation}from'@docusaurus/router';import{toggleListItem}from'../../../../utils/jsUtils';import{prepareUserState}from'../../index';import styles from'./styles.module.css';var TagQueryStringKey='tags';export function readSearchTags(search){return new URLSearchParams(search).getAll(TagQueryStringKey);}function replaceSearchTags(search,newTags){var searchParams=new URLSearchParams(search);searchParams["delete"](TagQueryStringKey);newTags.forEach(function(tag){return searchParams.append(TagQueryStringKey,tag);});return searchParams.toString();}function ShowcaseTagSelect(_ref,ref){var id=_ref.id,icon=_ref.icon,label=_ref.label,tag=_ref.tag,rest=_objectWithoutPropertiesLoose(_ref,_excluded);var location=useLocation();var history=useHistory();var _useState=useState(false),selected=_useState[0],setSelected=_useState[1];useEffect(function(){var tags=readSearchTags(location.search);setSelected(tags.includes(tag));},[tag,location]);var toggleTag=useCallback(function(){var tags=readSearchTags(location.search);var newTags=toggleListItem(tags,tag);var newSearch=replaceSearchTags(location.search,newTags);history.push(Object.assign({},location,{search:newSearch,state:prepareUserState()}));},[tag,location,history]);return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement("input",_extends({type:"checkbox",id:id,className:"screen-reader-only",onKeyDown:function onKeyDown(e){if(e.key==='Enter'){toggleTag();}},onFocus:function onFocus(e){if(e.relatedTarget){var _e$target$nextElement;(_e$target$nextElement=e.target.nextElementSibling)==null?void 0:_e$target$nextElement.dispatchEvent(new KeyboardEvent('focus'));}},onBlur:function onBlur(e){var _e$target$nextElement2;(_e$target$nextElement2=e.target.nextElementSibling)==null?void 0:_e$target$nextElement2.dispatchEvent(new KeyboardEvent('blur'));},onChange:toggleTag,checked:selected},rest)),/*#__PURE__*/React.createElement("label",{ref:ref,htmlFor:id,className:styles.checkboxLabel},label,icon));}export default/*#__PURE__*/React.forwardRef(ShowcaseTagSelect);